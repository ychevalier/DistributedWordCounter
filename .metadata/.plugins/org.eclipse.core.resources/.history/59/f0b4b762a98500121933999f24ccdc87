package Application;

import Network.FromMaster.PartServer;


public class WCSlaveApp {
	
	static int mFileCounter = 0;

    public static synchronized int getNextFileCount() {
    	return mFileCounter++;
    }
    
    static boolean simpleCliParser(String [] args) {
    	
    	boolean isError = false;
    	
    	if(args.length != 6) {
    		isError = true;
    	} else {	
	    	for(int x = 0; x < args.length; x++){
	    	    if("-p".equals(args[x])){
	    	        System.out.println(args[x + 1]);
	    	        x++;
	    	        break;
	    	    } else if("-ma".equals(args[x])){
	    	    	System.out.println(args[x + 1]);
	    	        x++;
	    	        break;
	    	    } else if("-mp".equals(args[x])){
	    	    	System.out.println(args[x + 1]);
	    	        x++;
	    	        break;
	    	    }
	    	}
    	}

    	if(isError) {
    		System.out.println("Usage: COMMAND -p <port_where_to_listen> -ma <remote_master_ip> -mp <remote_master_port>");
    	}
    	
    	return !isError;
    }
	
	public static void main(String[] args) {
		
		if(!simpleCliParser(args)) {
			return;
		}
		
		PartServer server = new PartServer();
		System.out.println("### Slave ###");
		server.launch();
	}

}
